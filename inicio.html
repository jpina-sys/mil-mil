<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feliz CumpleaÃ±os ğŸ‚</title>
  <link rel="stylesheet" href="css/styles.css">
  
  <style>
    .oculto {
        opacity: 0;
        transition: opacity 2.5s ease-in-out;
    }
    .visible {
        opacity: 1;
    }
    
    /* BotÃ³n volver personalizado */
    .btn-volver {
        position: fixed;
        top: 20px;
        left: 20px;
        padding: 12px 25px;
        background: rgba(255,0,153,0.9);
        color: white;
        text-decoration: none;
        border-radius: 10px;
        font-weight: bold;
        font-size: 18px;
        box-shadow: 0 0 20px rgba(255,0,153,0.6);
        transition: all 0.3s ease;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .btn-volver:hover {
        background: rgba(0,255,255,0.9);
        box-shadow: 0 0 30px rgba(0,255,255,0.8);
        transform: scale(1.1);
    }
  </style>
</head>
<body>

  <!-- BotÃ³n Volver a la pÃ¡gina principal -->
  <a href="index.html" class="btn-volver">â¬… Volver</a>

  <div id="contenido-completo" class="oculto">
    
    <h1>ğŸ‰ Feliz CumpleaÃ±os ğŸ‰</h1>
    <p>QUE VIVA LA cumpleaÃ±era ğŸ’–</p>

    <div class="menu-botones">
      <a href="mensaje.html" class="btn">ğŸ‚ Mensaje</a>
      <a href="galeria.html" class="btn">ğŸ“¸ GalerÃ­a</a>
      <a href="video.html" class="btn">ğŸ¥ Video</a>
    </div>

  </div>

  <!-- Corazones flotantes -->
  <div class="corazon-flotante">ğŸ’–</div>
  <div class="corazon-flotante">ğŸ’•</div>
  <div class="corazon-flotante">ğŸ’—</div>
  <div class="corazon-flotante">ğŸ’“</div>
  <div class="corazon-flotante">ğŸ’</div>
  <div class="corazon-flotante">ğŸ’</div>

  <!-- Tortas flotantes -->
  <div class="torta-flotante">ğŸ‚</div>
  <div class="torta-flotante">ğŸ§</div>
  <div class="torta-flotante">ğŸ°</div>
  <div class="torta-flotante">ğŸ‚</div>
  <div class="torta-flotante">ğŸ§</div>

  <!-- Reproductor de mÃºsica (oculto) - RUTA CORREGIDA -->
  <audio id="musicaFondo" loop>
    <source src="musica/BTS Singing Happy Birthday.mp3" type="audio/mpeg">
  </audio>

  <!-- BotÃ³n para controlar la mÃºsica -->
  <button id="btnMusica" class="control-musica">
    <span id="iconoMusica">ğŸ”Š</span>
  </button>

  <script>
    // Mostrar contenido con animaciÃ³n
    document.addEventListener('DOMContentLoaded', () => {
        const contenido = document.getElementById('contenido-completo');
        setTimeout(() => {
            contenido.classList.remove('oculto');
            contenido.classList.add('visible');
        }, 300);
    });

    // Control de mÃºsica con mejor manejo de errores
    const musica = document.getElementById('musicaFondo');
    const btnMusica = document.getElementById('btnMusica');
    const iconoMusica = document.getElementById('iconoMusica');
    let musicaReproduciendo = false;

    // Verificar que el audio se cargÃ³ correctamente
    musica.addEventListener('error', function(e) {
      console.error('Error al cargar el audio:', e);
      console.error('Verifica que el archivo existe en: musica/BTS Singing Happy Birthday.mp3');
      iconoMusica.textContent = 'âŒ';
    });

    musica.addEventListener('canplay', function() {
      console.log('âœ… Audio cargado correctamente');
    });

    // Verificar si la mÃºsica estaba sonando en la pÃ¡gina anterior
    const musicaActiva = localStorage.getItem('musicaActiva');
    const tiempoMusica = localStorage.getItem('tiempoMusica');

    // Intentar continuar la mÃºsica desde donde se quedÃ³
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        musica.volume = 0.6;
        
        // Si habÃ­a mÃºsica activa, continuar desde el tiempo guardado
        if (musicaActiva === 'true' && tiempoMusica) {
          musica.currentTime = parseFloat(tiempoMusica);
        }
        
        musica.play().then(() => {
          musicaReproduciendo = true;
          iconoMusica.textContent = 'ğŸ”Š';
          btnMusica.classList.add('reproduciendo');
          console.log('ğŸµ MÃºsica reproduciendo');
        }).catch((error) => {
          console.log('âš ï¸ Autoplay bloqueado. Haz clic en el botÃ³n para reproducir.');
          musicaReproduciendo = false;
          iconoMusica.textContent = 'ğŸ”‡';
          btnMusica.classList.remove('reproduciendo');
        });
      }, 500);
    });

    // Toggle mÃºsica al hacer clic en el botÃ³n
    btnMusica.addEventListener('click', () => {
      if (musicaReproduciendo) {
        musica.pause();
        iconoMusica.textContent = 'ğŸ”‡';
        musicaReproduciendo = false;
        btnMusica.classList.remove('reproduciendo');
        console.log('â¸ï¸ MÃºsica pausada');
      } else {
        musica.play().then(() => {
          iconoMusica.textContent = 'ğŸ”Š';
          musicaReproduciendo = true;
          btnMusica.classList.add('reproduciendo');
          console.log('â–¶ï¸ MÃºsica reproduciendo');
        }).catch((error) => {
          console.error('âŒ Error al reproducir:', error);
          alert('No se pudo reproducir la mÃºsica. Verifica que el archivo existe.');
        });
      }
    });

    // Guardar estado de mÃºsica al cambiar de pÃ¡gina
    window.addEventListener('beforeunload', () => {
      localStorage.setItem('musicaActiva', musicaReproduciendo);
      if (musicaReproduciendo) {
        localStorage.setItem('tiempoMusica', musica.currentTime);
      }
    });

    // Actualizar tiempo cada 500ms para mejor continuidad
    setInterval(() => {
      if (musicaReproduciendo) {
        localStorage.setItem('tiempoMusica', musica.currentTime);
      }
    }, 500);
  </script>

</body>
</html>